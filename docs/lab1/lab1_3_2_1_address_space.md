#### 地址空间

LoongArch32的地址空间涉及两种地址：
- 逻辑地址（Logical Address,应用程序员看到的地址，在操作系统原理上称为虚拟地址，以后提到虚拟地址就是指逻辑地址）
- 物理地址（Physical Address, 实际的物理内存地址）。

(1)	逻辑地址空间
从应用程序的角度看，逻辑地址空间就是应用程序员编程所用到的地址空间，比如下面的程序片段：
	int val=100;
	int * point=&val;

其中指针变量point中存储的即是一个逻辑地址。

(2)	物理地址空间
从操作系统的角度看，CPU、内存硬件（通常说的“内存条”）和各种外设是它主要管理的硬件资源而内存硬件和外设分布在物理地址空间中。物理地址空间就是一个“大数组”，CPU通过索引（物理地址）来访问这个“大数组”中的内容。物理地址是指CPU提交到内存总线上用于访问计算机内存和外设的最终地址。

物理地址空间的大小取决于CPU实现的物理地址位数，LoongArch32计算机中，CPU的物理地址空间取决于处理器配置的PALEN。而对于外设，则是固定配置于0x1f000000~0x1fffffff。例如我们如果配置QEMU的内存为256M，那么物理地址空间如下：

	+------------------+  <- 0xFFFFFFFF (4GB)
	|     无效空间      |
	+------------------+  <- 0x1FFFFFFF (512M)
	|   IO外设地址空间   |
	+------------------+  <- 0x1F000000 (496M)
	|     无效空间      |
	+------------------+  <- 0x0FFFFFFF (256M)
	|     有效内存      |
	+------------------+  <- 0x00000000

图6 LoongArch32计算机系统的物理地址空间

(3)	地址空间的翻译

LoongArch32架构地址空间有两种翻译模式：

- 直接地址翻译模式（CSR.CRMD中的DA=1且PG=0时）
	简单地使物理地址=虚拟地址的前PALEN位，后续补0。
	注：PALEN与处理器配置有关。
- 映射地址翻译模式（CSR.CRMD中的DA=0且PG=1时）
	- 先查看DMW地址映射窗口，若匹配则按照DMW配置的翻译。不匹配则继续。
	- 然后检查TLB是否存在该页表项，若匹配则按照TLB对应配置翻译，不匹配则产生TLB例外由操作系统内核根据页表完成TLB填充操作。